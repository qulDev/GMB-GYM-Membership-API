{
  "openapi": "3.1.0",
  "info": {
    "title": "GMB - GYM Membership Backend",
    "description": "Comprehensive API for GYM membership management including user authentication, membership plans, payments with Midtrans integration, and check-in/check-out tracking.",
    "version": "1.0.0",
    "contact": {
      "name": "API Support",
      "email": "support@gymmembership.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Local Development"
    },
    {
      "url": "https://api.gymmembership.com",
      "description": "Production Server"
    }
  ],
  "tags": [
    {
      "name": "Authentication",
      "description": "User authentication and authorization endpoints"
    },
    {
      "name": "Users",
      "description": "User management operations"
    },
    {
      "name": "Membership Plans",
      "description": "Membership plan management"
    },
    {
      "name": "Subscriptions",
      "description": "User subscription management"
    },
    {
      "name": "Payments",
      "description": "Payment processing with Midtrans"
    },
    {
      "name": "Check-In/Out",
      "description": "GYM check-in and check-out tracking"
    },
    {
      "name": "Classes",
      "description": "GYM class schedules and bookings"
    },
    {
      "name": "Trainers",
      "description": "Personal trainer management"
    },
    {
      "name": "Reports",
      "description": "Analytics and reporting"
    }
  ],
  "paths": {
    "/api/v1/auth/register": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Register new user",
        "description": "Create a new user account",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password", "fullName", "phone"],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "user@example.com"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "minLength": 8,
                    "example": "SecurePass123!"
                  },
                  "fullName": {
                    "type": "string",
                    "example": "John Doe"
                  },
                  "phone": {
                    "type": "string",
                    "example": "+6281234567890"
                  },
                  "dateOfBirth": {
                    "type": "string",
                    "format": "date",
                    "example": "1990-01-15"
                  },
                  "gender": {
                    "type": "string",
                    "enum": ["male", "female", "other"],
                    "example": "male"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User registered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseAuth"
                }
              }
            }
          },
          "400": {
            "description": "Invalid input",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseError"
                }
              }
            }
          },
          "409": {
            "description": "User already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": ["Authentication"],
        "summary": "User login",
        "description": "Authenticate user and return JWT token",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password"],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "user@example.com"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "example": "SecurePass123!"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseAuth"
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Refresh access token",
        "description": "Generate new access token using refresh token",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["refreshToken"],
                "properties": {
                  "refreshToken": {
                    "type": "string",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token refreshed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseAuth"
                }
              }
            }
          },
          "401": {
            "description": "Invalid refresh token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "tags": ["Authentication"],
        "summary": "User logout",
        "description": "Invalidate user session and tokens",
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "200": {
            "description": "Logout successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseMessage"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/me": {
      "get": {
        "tags": ["Users"],
        "summary": "Get current user profile",
        "description": "Retrieve authenticated user's profile information",
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "200": {
            "description": "User profile retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseUser"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Users"],
        "summary": "Update user profile",
        "description": "Update authenticated user's profile",
        "security": [{ "BearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "fullName": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "dateOfBirth": {
                    "type": "string",
                    "format": "date"
                  },
                  "gender": {
                    "type": "string",
                    "enum": ["male", "female", "other"]
                  },
                  "address": {
                    "type": "string"
                  },
                  "emergencyContact": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseUser"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users": {
      "get": {
        "tags": ["Users"],
        "summary": "List all users (Admin only)",
        "description": "Retrieve paginated list of users",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 10
            }
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Search by name or email"
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["active", "inactive", "suspended"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Users list retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseUserList"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{userId}": {
      "get": {
        "tags": ["Users"],
        "summary": "Get user by ID (Admin only)",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseUser"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Users"],
        "summary": "Delete user (Admin only)",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseMessage"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/membership-plans": {
      "get": {
        "tags": ["Membership Plans"],
        "summary": "Get all membership plans",
        "description": "Retrieve all available membership plans",
        "responses": {
          "200": {
            "description": "Plans retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseMembershipPlanList"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Membership Plans"],
        "summary": "Create membership plan (Admin only)",
        "security": [{ "BearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["name", "duration", "price"],
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "Gold Membership"
                  },
                  "description": {
                    "type": "string",
                    "example": "Premium access with personal trainer"
                  },
                  "duration": {
                    "type": "integer",
                    "description": "Duration in days",
                    "example": 30
                  },
                  "price": {
                    "type": "number",
                    "example": 500000
                  },
                  "features": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "example": [
                      "Unlimited gym access",
                      "Free classes",
                      "Personal trainer"
                    ]
                  },
                  "maxCheckInsPerDay": {
                    "type": "integer",
                    "example": 2
                  },
                  "isActive": {
                    "type": "boolean",
                    "default": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Plan created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseMembershipPlan"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/membership-plans/{planId}": {
      "get": {
        "tags": ["Membership Plans"],
        "summary": "Get membership plan by ID",
        "parameters": [
          {
            "name": "planId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Plan found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseMembershipPlan"
                }
              }
            }
          },
          "404": {
            "description": "Plan not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Membership Plans"],
        "summary": "Update membership plan (Admin only)",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "planId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "price": {
                    "type": "number"
                  },
                  "features": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "isActive": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Plan updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseMembershipPlan"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Membership Plans"],
        "summary": "Delete membership plan (Admin only)",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "planId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Plan deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseMessage"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/subscriptions": {
      "get": {
        "tags": ["Subscriptions"],
        "summary": "Get user subscriptions",
        "description": "Get current user's subscription history",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["active", "expired", "cancelled"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Subscriptions retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseSubscriptionList"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Subscriptions"],
        "summary": "Create new subscription",
        "description": "Subscribe to a membership plan",
        "security": [{ "BearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["membershipPlanId"],
                "properties": {
                  "membershipPlanId": {
                    "type": "string",
                    "example": "clxxxx123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Subscription created, payment required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseSubscriptionWithPayment"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/subscriptions/active": {
      "get": {
        "tags": ["Subscriptions"],
        "summary": "Get current active subscription",
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "200": {
            "description": "Active subscription found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseSubscription"
                }
              }
            }
          },
          "404": {
            "description": "No active subscription",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/subscriptions/{subscriptionId}/cancel": {
      "post": {
        "tags": ["Subscriptions"],
        "summary": "Cancel subscription",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "subscriptionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Subscription cancelled",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseMessage"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/payments": {
      "get": {
        "tags": ["Payments"],
        "summary": "Get payment history",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Payment history retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponsePaymentList"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/payments/{paymentId}": {
      "get": {
        "tags": ["Payments"],
        "summary": "Get payment details",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "paymentId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Payment details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponsePayment"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/payments/{paymentId}/process": {
      "post": {
        "tags": ["Payments"],
        "summary": "Process payment with Midtrans",
        "description": "Create Midtrans payment transaction",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "paymentId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["paymentMethod"],
                "properties": {
                  "paymentMethod": {
                    "type": "string",
                    "enum": ["credit_card", "bank_transfer", "gopay", "qris"],
                    "example": "gopay"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Payment token created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponsePaymentProcess"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/payments/webhook/midtrans": {
      "post": {
        "tags": ["Payments"],
        "summary": "Midtrans payment webhook",
        "description": "Handle payment notifications from Midtrans",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Webhook processed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseMessage"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/check-ins": {
      "get": {
        "tags": ["Check-In/Out"],
        "summary": "Get check-in history",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "startDate",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "endDate",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Check-in history",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseCheckInList"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Check-In/Out"],
        "summary": "Check in to gym",
        "description": "Record gym check-in",
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "201": {
            "description": "Checked in successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseCheckIn"
                }
              }
            }
          },
          "403": {
            "description": "No active membership or check-in limit reached",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/check-ins/{checkInId}/checkout": {
      "post": {
        "tags": ["Check-In/Out"],
        "summary": "Check out from gym",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "checkInId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Checked out successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseCheckIn"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/check-ins/current": {
      "get": {
        "tags": ["Check-In/Out"],
        "summary": "Get current check-in status",
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "200": {
            "description": "Current check-in status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseCheckInStatus"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/classes": {
      "get": {
        "tags": ["Classes"],
        "summary": "Get gym classes",
        "parameters": [
          {
            "name": "date",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "type",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Class type (yoga, boxing, cardio, etc)"
          }
        ],
        "responses": {
          "200": {
            "description": "Classes list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseGymClassList"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Classes"],
        "summary": "Create gym class (Admin only)",
        "security": [{ "BearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["name", "trainerId", "schedule", "capacity"],
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "Morning Yoga"
                  },
                  "description": {
                    "type": "string"
                  },
                  "trainerId": {
                    "type": "string"
                  },
                  "schedule": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "duration": {
                    "type": "integer",
                    "description": "Duration in minutes",
                    "example": 60
                  },
                  "capacity": {
                    "type": "integer",
                    "example": 20
                  },
                  "type": {
                    "type": "string",
                    "example": "yoga"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Class created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseGymClass"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/classes/{classId}": {
      "get": {
        "tags": ["Classes"],
        "summary": "Get class details",
        "parameters": [
          {
            "name": "classId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Class details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseGymClass"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Classes"],
        "summary": "Update class (Admin only)",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "classId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "schedule": { "type": "string", "format": "date-time" },
                  "capacity": { "type": "integer" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Class updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseGymClass"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Classes"],
        "summary": "Delete class (Admin only)",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "classId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Class deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseMessage"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/classes/{classId}/book": {
      "post": {
        "tags": ["Classes"],
        "summary": "Book a class",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "classId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Class booked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseMessage"
                }
              }
            }
          },
          "409": {
            "description": "Class is full or already booked",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/classes/{classId}/cancel": {
      "post": {
        "tags": ["Classes"],
        "summary": "Cancel class booking",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "classId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Booking cancelled",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseMessage"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/trainers": {
      "get": {
        "tags": ["Trainers"],
        "summary": "Get all trainers",
        "responses": {
          "200": {
            "description": "Trainers list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseTrainerList"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Trainers"],
        "summary": "Add trainer (Admin only)",
        "security": [{ "BearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["name", "specialization"],
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "specialization": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "example": ["Yoga", "Pilates"]
                  },
                  "bio": {
                    "type": "string"
                  },
                  "certifications": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Trainer added",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseTrainer"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/trainers/{trainerId}": {
      "get": {
        "tags": ["Trainers"],
        "summary": "Get trainer details",
        "parameters": [
          {
            "name": "trainerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Trainer details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseTrainer"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Trainers"],
        "summary": "Update trainer (Admin only)",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "trainerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "specialization": {
                    "type": "array",
                    "items": { "type": "string" }
                  },
                  "bio": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Trainer updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseTrainer"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Trainers"],
        "summary": "Delete trainer (Admin only)",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "trainerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Trainer deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseMessage"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/reports/dashboard": {
      "get": {
        "tags": ["Reports"],
        "summary": "Get dashboard statistics (Admin only)",
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "200": {
            "description": "Dashboard stats",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseDashboardStats"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/reports/revenue": {
      "get": {
        "tags": ["Reports"],
        "summary": "Get revenue report (Admin only)",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "startDate",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "endDate",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Revenue report",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseRevenueReport"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/reports/attendance": {
      "get": {
        "tags": ["Reports"],
        "summary": "Get attendance report (Admin only)",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "startDate",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "endDate",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Attendance report",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseAttendanceReport"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Enter your JWT token"
      }
    },
    "schemas": {
      "ResponseEnvelope": {
        "type": "object",
        "required": ["status", "code", "data"],
        "properties": {
          "status": {
            "type": "string",
            "example": "success"
          },
          "code": {
            "type": "integer",
            "example": 200
          },
          "data": {
            "description": "Wrapped response payload",
            "type": "object"
          }
        }
      },
      "ResponseError": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "status": {
                "type": "string",
                "example": "error"
              },
              "code": {
                "type": "integer",
                "example": 400
              },
              "data": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        ]
      },
      "ResponseMessage": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Operation completed"
                  }
                }
              }
            }
          }
        ]
      },
      "ResponseAuth": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "$ref": "#/components/schemas/AuthResponse"
              }
            }
          }
        ]
      },
      "ResponseUser": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "$ref": "#/components/schemas/User"
              }
            }
          }
        ]
      },
      "ResponseUserList": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "type": "object",
                "properties": {
                  "items": {
                    "type": "array",
                    "items": { "$ref": "#/components/schemas/User" }
                  },
                  "pagination": {
                    "$ref": "#/components/schemas/Pagination"
                  }
                }
              }
            }
          }
        ]
      },
      "ResponseMembershipPlan": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "$ref": "#/components/schemas/MembershipPlan"
              }
            }
          }
        ]
      },
      "ResponseMembershipPlanList": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "type": "array",
                "items": { "$ref": "#/components/schemas/MembershipPlan" }
              }
            }
          }
        ]
      },
      "ResponseSubscription": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "$ref": "#/components/schemas/Subscription"
              }
            }
          }
        ]
      },
      "ResponseSubscriptionList": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "type": "array",
                "items": { "$ref": "#/components/schemas/Subscription" }
              }
            }
          }
        ]
      },
      "ResponseSubscriptionWithPayment": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "type": "object",
                "properties": {
                  "subscription": {
                    "$ref": "#/components/schemas/Subscription"
                  },
                  "payment": { "$ref": "#/components/schemas/Payment" }
                }
              }
            }
          }
        ]
      },
      "ResponsePayment": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "$ref": "#/components/schemas/Payment"
              }
            }
          }
        ]
      },
      "ResponsePaymentList": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "type": "object",
                "properties": {
                  "items": {
                    "type": "array",
                    "items": { "$ref": "#/components/schemas/Payment" }
                  },
                  "pagination": { "$ref": "#/components/schemas/Pagination" }
                }
              }
            }
          }
        ]
      },
      "PaymentProcessPayload": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string"
          },
          "redirectUrl": {
            "type": "string"
          },
          "qrCode": {
            "type": "string"
          }
        }
      },
      "ResponsePaymentProcess": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "$ref": "#/components/schemas/PaymentProcessPayload"
              }
            }
          }
        ]
      },
      "ResponseCheckIn": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "$ref": "#/components/schemas/CheckIn"
              }
            }
          }
        ]
      },
      "ResponseCheckInList": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "type": "array",
                "items": { "$ref": "#/components/schemas/CheckIn" }
              }
            }
          }
        ]
      },
      "ResponseCheckInStatus": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "type": "object",
                "properties": {
                  "isCheckedIn": { "type": "boolean" },
                  "checkIn": { "$ref": "#/components/schemas/CheckIn" }
                }
              }
            }
          }
        ]
      },
      "ResponseGymClass": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "$ref": "#/components/schemas/GymClass"
              }
            }
          }
        ]
      },
      "ResponseGymClassList": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "type": "array",
                "items": { "$ref": "#/components/schemas/GymClass" }
              }
            }
          }
        ]
      },
      "ResponseTrainer": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "$ref": "#/components/schemas/Trainer"
              }
            }
          }
        ]
      },
      "ResponseTrainerList": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": {
                "type": "array",
                "items": { "$ref": "#/components/schemas/Trainer" }
              }
            }
          }
        ]
      },
      "DashboardStats": {
        "type": "object",
        "properties": {
          "totalMembers": { "type": "integer" },
          "activeMembers": { "type": "integer" },
          "totalRevenue": { "type": "number" },
          "monthlyRevenue": { "type": "number" },
          "todayCheckIns": { "type": "integer" },
          "popularClasses": {
            "type": "array",
            "items": { "type": "object" }
          }
        }
      },
      "ResponseDashboardStats": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": { "$ref": "#/components/schemas/DashboardStats" }
            }
          }
        ]
      },
      "RevenueReport": {
        "type": "object",
        "properties": {
          "startDate": { "type": "string", "format": "date" },
          "endDate": { "type": "string", "format": "date" },
          "totalRevenue": { "type": "number" },
          "daily": {
            "type": "array",
            "items": { "type": "object" }
          }
        }
      },
      "ResponseRevenueReport": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": { "$ref": "#/components/schemas/RevenueReport" }
            }
          }
        ]
      },
      "AttendanceReport": {
        "type": "object",
        "properties": {
          "startDate": { "type": "string", "format": "date" },
          "endDate": { "type": "string", "format": "date" },
          "attendance": {
            "type": "array",
            "items": { "type": "object" }
          }
        }
      },
      "ResponseAttendanceReport": {
        "allOf": [
          { "$ref": "#/components/schemas/ResponseEnvelope" },
          {
            "type": "object",
            "properties": {
              "data": { "$ref": "#/components/schemas/AttendanceReport" }
            }
          }
        ]
      },
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "clxxxx123"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "fullName": {
            "type": "string"
          },
          "phone": {
            "type": "string"
          },
          "dateOfBirth": {
            "type": "string",
            "format": "date"
          },
          "gender": {
            "type": "string",
            "enum": ["male", "female", "other"]
          },
          "address": {
            "type": "string"
          },
          "emergencyContact": {
            "type": "string"
          },
          "role": {
            "type": "string",
            "enum": ["user", "admin"],
            "default": "user"
          },
          "status": {
            "type": "string",
            "enum": ["active", "inactive", "suspended"],
            "default": "active"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "AuthResponse": {
        "type": "object",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/User"
          },
          "tokens": {
            "type": "object",
            "properties": {
              "accessToken": {
                "type": "string"
              },
              "refreshToken": {
                "type": "string"
              },
              "expiresIn": {
                "type": "integer",
                "description": "Token expiration in seconds"
              }
            }
          }
        }
      },
      "MembershipPlan": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "duration": {
            "type": "integer",
            "description": "Duration in days"
          },
          "price": {
            "type": "number"
          },
          "features": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "maxCheckInsPerDay": {
            "type": "integer"
          },
          "isActive": {
            "type": "boolean"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Subscription": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "userId": {
            "type": "string"
          },
          "membershipPlanId": {
            "type": "string"
          },
          "membershipPlan": {
            "$ref": "#/components/schemas/MembershipPlan"
          },
          "startDate": {
            "type": "string",
            "format": "date-time"
          },
          "endDate": {
            "type": "string",
            "format": "date-time"
          },
          "status": {
            "type": "string",
            "enum": ["pending", "active", "expired", "cancelled"]
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Payment": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "userId": {
            "type": "string"
          },
          "subscriptionId": {
            "type": "string"
          },
          "amount": {
            "type": "number"
          },
          "paymentMethod": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": ["pending", "processing", "success", "failed", "cancelled"]
          },
          "midtransOrderId": {
            "type": "string"
          },
          "midtransTransactionId": {
            "type": "string"
          },
          "paidAt": {
            "type": "string",
            "format": "date-time"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CheckIn": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "userId": {
            "type": "string"
          },
          "checkInTime": {
            "type": "string",
            "format": "date-time"
          },
          "checkOutTime": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "duration": {
            "type": "integer",
            "description": "Duration in minutes",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "GymClass": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "trainerId": {
            "type": "string"
          },
          "trainer": {
            "$ref": "#/components/schemas/Trainer"
          },
          "schedule": {
            "type": "string",
            "format": "date-time"
          },
          "duration": {
            "type": "integer",
            "description": "Duration in minutes"
          },
          "capacity": {
            "type": "integer"
          },
          "bookedCount": {
            "type": "integer"
          },
          "type": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": ["scheduled", "ongoing", "completed", "cancelled"]
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Trainer": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "phone": {
            "type": "string"
          },
          "specialization": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "bio": {
            "type": "string"
          },
          "certifications": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "isActive": {
            "type": "boolean"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Pagination": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer"
          },
          "limit": {
            "type": "integer"
          },
          "total": {
            "type": "integer"
          },
          "totalPages": {
            "type": "integer"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "details": {
            "type": "array",
            "items": {
              "type": "object"
            }
          }
        }
      }
    }
  }
}
